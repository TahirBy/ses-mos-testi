<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KonuÅŸma Sentezi/SÄ±kÄ±ÅŸtÄ±rma Kalite Testi (MOS)</title>
    <style>
        /* TasarÄ±m AyarlarÄ± */
        :root { --primary-color: #2c3e50; --accent-color: #3498db; --bg-color: #f8f9fa; }
        body { font-family: 'Segoe UI', 'Roboto', sans-serif; background-color: var(--bg-color); color: #333; max-width: 900px; margin: 0 auto; padding: 40px 20px; line-height: 1.6; }
        h1 { text-align: center; color: var(--primary-color); margin-bottom: 10px; }
        .subtitle { text-align: center; color: #7f8c8d; font-size: 0.9em; margin-bottom: 40px; }
        .info-section { background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 25px; border-left: 5px solid var(--accent-color); }
        .scale-guide { background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden; margin-bottom: 30px; }
        .scale-row { display: flex; border-bottom: 1px solid #eee; }
        .scale-row:last-child { border-bottom: none; }
        .scale-score { width: 50px; background: var(--primary-color); color: #fff; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2em; }
        .scale-desc { padding: 10px 15px; flex: 1; font-size: 0.9em; }
        .scale-desc strong { display: block; color: var(--primary-color); }
        .form-group { margin-bottom: 15px; }
        label.input-label { font-weight: bold; display: block; margin-bottom: 8px; }
        input[type="text"], select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        .sample-card { background: #fff; padding: 25px; margin-bottom: 30px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); transition: transform 0.2s; border: 1px solid #eee; }
        .sample-card:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); border-color: var(--accent-color); }
        .sample-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px; }
        .sample-title { font-weight: bold; font-size: 1.1em; color: #444; }
        .audio-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        @media (max-width: 600px) { .audio-grid { grid-template-columns: 1fr; } }
        .audio-col { text-align: center; background: #fafafa; padding: 15px; border-radius: 8px; }
        .badge { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.75em; font-weight: bold; text-transform: uppercase; margin-bottom: 8px; }
        .badge-ref { background: #e3f2fd; color: #1565c0; }
        .badge-model { background: #e8f5e9; color: #2e7d32; }
        audio { width: 100%; height: 35px; margin-top: 5px; }
        .rating-area { background: #fdfdfd; padding: 15px; border-radius: 8px; text-align: center; border-top: 1px solid #eee; }
        .rating-question { display: block; margin-bottom: 15px; font-weight: 600; color: #555; }
        .rating-options { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .rating-label { cursor: pointer; position: relative; width: 80px; text-align: center; padding: 5px; border: 1px solid transparent; border-radius: 8px; transition: all 0.2s; }
        .rating-label:hover { background: #f0f8ff; border-color: #b3e5fc; }
        .rating-label input { margin-bottom: 5px; transform: scale(1.2); cursor: pointer; }
        .rating-text { display: block; font-size: 0.8em; color: #666; line-height: 1.2; }
        .rating-val { font-weight: bold; font-size: 1.2em; display: block; color: var(--primary-color); }
        button#submit-btn { width: 100%; padding: 18px; background-color: var(--accent-color); color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: background 0.3s; margin-top: 20px; }
        button#submit-btn:hover { background-color: #2980b9; }
        button:disabled { background-color: #95a5a6; cursor: not-allowed; }
        .footer-note { text-align: center; font-size: 0.85em; color: #999; margin-top: 40px; }
    </style>
</head>
<body>

    <h1>KonuÅŸma SÄ±kÄ±ÅŸtÄ±rma Modeli</h1>
    <p class="subtitle">GeniÅŸ KapsamlÄ± MOS Testi</p>

    <div class="info-section">
        <h3>ðŸ‘‹ HoÅŸ Geldiniz</h3>
        <p>AÅŸaÄŸÄ±da farklÄ± sÄ±kÄ±ÅŸtÄ±rma oranlarÄ±na sahip ses dosyalarÄ± bulunmaktadÄ±r. LÃ¼tfen her birini referans ses ile kÄ±yaslayarak puanlayÄ±nÄ±z.</p>
    </div>

    <div class="scale-guide">
        <div class="scale-row"><div class="scale-score">5</div><div class="scale-desc"><strong>MÃ¼kemmel</strong> - Referans ile ayÄ±rt edilemiyor.</div></div>
        <div class="scale-row"><div class="scale-score">4</div><div class="scale-desc"><strong>Ä°yi</strong> - Ã‡ok hafif bozulma, rahatsÄ±z etmiyor.</div></div>
        <div class="scale-row"><div class="scale-score">3</div><div class="scale-desc"><strong>Orta</strong> - Bozulma belirgin ama anlaÅŸÄ±lÄ±r.</div></div>
        <div class="scale-row"><div class="scale-score">2</div><div class="scale-desc"><strong>KÃ¶tÃ¼</strong> - RahatsÄ±z edici, metalik sesler.</div></div>
        <div class="scale-row"><div class="scale-score">1</div><div class="scale-desc"><strong>Ã‡ok KÃ¶tÃ¼</strong> - AnlaÅŸÄ±lamÄ±yor.</div></div>
    </div>

    <form id="mos-form">
        <div class="sample-card">
            <div class="sample-header"><span class="sample-title">KatÄ±lÄ±mcÄ± Bilgileri</span></div>
            <div class="form-group">
                <label class="input-label">Rumuz:</label>
                <input type="text" name="Katilimci_Ismi" placeholder="AdÄ±nÄ±z / Rumuzunuz">
            </div>
            <div class="form-group">
                <label class="input-label">Ekipman:</label>
                <select name="Kulaklik_Tipi">
                    <option value="Kablolu_Kulaklik">Kablolu KulaklÄ±k</option>
                    <option value="Bluetooth_Kulaklik">Bluetooth KulaklÄ±k</option>
                    <option value="Hoparlor">HoparlÃ¶r</option>
                </select>
            </div>
        </div>

        <div id="audio-container"></div>

        <button type="submit" id="submit-btn">Testi GÃ¶nder</button>
    </form>
    
    <div class="footer-note">Â© 2026 Akademik AraÅŸtÄ±rma Grubu</div>

    <script>
        // --- AYARLAR ---
        const scriptURL = 'BURAYA_GOOGLE_SCRIPT_URL_YAPISTIR';

        // 1. ADIM: ELÄ°NÄ°ZDEKÄ° NUMARALARI BURAYA YAZIN
        // GÃ¶rselde gÃ¶rdÃ¼ÄŸÃ¼m kadarÄ±yla 01, 02, 04, 06, 07, 09... ÅŸeklinde gidiyor.
        // Buraya 100 dosya hangi numaralara aitse onlarÄ± tÄ±rnak iÃ§inde virgÃ¼lle yazÄ±n.
        const sampleNumaralari = [
            "01", "02", "04", "06", "07", "09", "11", "12", "13", "15", "17", "18", "22", "23", "26", "32", "36", "42", "46"
            // DevamÄ±nÄ± buraya ekleyin... Ã–rn: "10", "12", "15"
        ];

        // 2. ADIM: RECON (MODEL) TÃœRLERÄ°NÄ° TANIMLIYORUZ (GÃ¶rsele gÃ¶re)
        // Dosya uzantÄ±larÄ±nÄ± (.wav) kod aÅŸaÄŸÄ±da kendisi ekleyecek.
        const reconTurleri = ["recon_0_8", "recon_1_6", "recon_3_2", "recon_4"];

        // --- OTOMATÄ°K LÄ°STE OLUÅžTURUCU (DokunmayÄ±nÄ±z) ---
        const container = document.getElementById('audio-container');
        let globalCounter = 1;

        // Her bir numara iÃ§in dÃ¶ngÃ¼ (Ã–rn: sample_01 iÃ§in)
        sampleNumaralari.forEach(num => {
            
            // Bu numara iÃ§in Referans DosyasÄ±
            const refFile = `audio/sample_${num}_original_1.wav`;

            // Bu numaranÄ±n 4 farklÄ± recon versiyonu iÃ§in dÃ¶ngÃ¼
            reconTurleri.forEach(tur => {
                // Test DosyasÄ±: sample_01_recon_0_8.wav
                const testFile = `audio/sample_${num}_${tur}.wav`;
                
                // Google Sheets SÃ¼tun Ä°smi: sample_01_recon_0_8
                // (Nokta veya Ã¶zel karakter olmamasÄ±na dikkat ediyoruz)
                const sutunIsmi = `sample_${num}_${tur}`;

                const htmlContent = `
                <div class="sample-card">
                    <div class="sample-header">
                        <span class="sample-title">#${globalCounter} - Ã–rnek ${num} (${tur.replace('_', '.')})</span>
                    </div>
                    
                    <div class="audio-grid">
                        <div class="audio-col">
                            <span class="badge badge-ref">Referans</span>
                            <audio controls controlsList="nodownload" src="${refFile}" preload="none"></audio>
                        </div>
                        <div class="audio-col">
                            <span class="badge badge-model">Model Ã‡Ä±ktÄ±sÄ±</span>
                            <audio controls controlsList="nodownload" src="${testFile}" preload="none"></audio>
                        </div>
                    </div>

                    <div class="rating-area">
                        <span class="rating-question">Kalite PuanÄ±nÄ±z:</span>
                        <div class="rating-options">
                            <label class="rating-label"><span class="rating-val">1</span><input type="radio" name="${sutunIsmi}" value="1" required><span class="rating-text">Ã‡ok KÃ¶tÃ¼</span></label>
                            <label class="rating-label"><span class="rating-val">2</span><input type="radio" name="${sutunIsmi}" value="2"><span class="rating-text">KÃ¶tÃ¼</span></label>
                            <label class="rating-label"><span class="rating-val">3</span><input type="radio" name="${sutunIsmi}" value="3"><span class="rating-text">Orta</span></label>
                            <label class="rating-label"><span class="rating-val">4</span><input type="radio" name="${sutunIsmi}" value="4"><span class="rating-text">Ä°yi</span></label>
                            <label class="rating-label"><span class="rating-val">5</span><input type="radio" name="${sutunIsmi}" value="5"><span class="rating-text">MÃ¼kemmel</span></label>
                        </div>
                    </div>
                </div>`;
                
                container.innerHTML += htmlContent;
                globalCounter++;
            });
        });

        // --- GÃ–NDERME Ä°ÅžLEMÄ° ---
        const form = document.getElementById('mos-form');
        const submitBtn = document.getElementById('submit-btn');

        form.addEventListener('submit', e => {
            e.preventDefault();
            submitBtn.innerHTML = "Kaydediliyor... (Dosya sayÄ±sÄ± Ã§ok olduÄŸu iÃ§in biraz sÃ¼rebilir)";
            submitBtn.disabled = true;

            const formData = new FormData(form);

            fetch(scriptURL, { method: 'POST', body: formData})
                .then(response => {
                    alert("TÃ¼m deÄŸerlendirmeler baÅŸarÄ±yla kaydedildi!");
                    submitBtn.innerHTML = "TamamlandÄ± âœ…";
                })
                .catch(error => {
                    console.error('Hata!', error);
                    alert("Hata oluÅŸtu. LÃ¼tfen tekrar deneyin.");
                    submitBtn.innerHTML = "Tekrar Dene";
                    submitBtn.disabled = false;
                });
        });
    </script>
</body>
</html>
